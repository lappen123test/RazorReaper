<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>RazorReaper</title>
    <base href="/" />
    <link href="css/theme.css" rel="stylesheet" />
    <link rel="icon" href="data:," />
    <link href="css/server-styles.css" rel="stylesheet" />
    <link href="css/ini-changer-styles.css" rel="stylesheet" />
    <link href="css/credits-styles.css" rel="stylesheet" />
    <link href="css/home-styles.css" rel="stylesheet" />
    <link href="css/game-styles.css" rel="stylesheet" />
    <link href="css/autoclicker-styles.css" rel="stylesheet" />
    <link href="css/suitfov-styles.css" rel="stylesheet" />
    <link href="css/building-styles.css" rel="stylesheet" />
</head>

<body>
    <div class="status-bar-safe-area"></div>

    <canvas id="network-canvas"></canvas>

    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>

    <script src="_framework/blazor.webview.js" autostart="false"></script>

    <script>
        window.startLocationPicker = function (dotNetRef) {
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(255, 0, 0, 0.2)';
            overlay.style.cursor = 'crosshair';
            overlay.style.zIndex = '9999';
            overlay.style.userSelect = 'none';

            const instruction = document.createElement('div');
            instruction.style.position = 'fixed';
            instruction.style.top = '20px';
            instruction.style.left = '50%';
            instruction.style.transform = 'translateX(-50%)';
            instruction.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
            instruction.style.color = 'white';
            instruction.style.padding = '10px 20px';
            instruction.style.borderRadius = '5px';
            instruction.style.zIndex = '10000';
            instruction.style.fontFamily = 'Arial, sans-serif';
            instruction.textContent = 'Click anywhere to select position (ESC to cancel)';

            document.body.appendChild(overlay);
            document.body.appendChild(instruction);

            const cleanup = () => {
                document.body.removeChild(overlay);
                document.body.removeChild(instruction);
                document.removeEventListener('keydown', keyHandler);
            };

            const keyHandler = (e) => {
                if (e.key === 'Escape') {
                    cleanup();
                }
            };

            document.addEventListener('keydown', keyHandler);

            overlay.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();

                const x = e.clientX;
                const y = e.clientY;

                cleanup();

                dotNetRef.invokeMethodAsync('SetPickedLocation', x, y);
            });
        };
    </script>

    <script src="js/network-animation.js"></script>
</body>
</html>