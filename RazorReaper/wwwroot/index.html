<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>RazorReaper</title>
    <base href="/" />
    <link href="css/theme.css" rel="stylesheet" />
    <link href="css/notifications.css" rel="stylesheet" />
    <link rel="icon" href="data:," />
    <link href="css/server-styles.css" rel="stylesheet" />
    <link href="css/ini-changer-styles.css" rel="stylesheet" />
    <link href="css/credits-styles.css" rel="stylesheet" />
    <link href="css/home-styles.css" rel="stylesheet" />
    <link href="css/game-styles.css" rel="stylesheet" />
    <link href="css/autoclicker-styles.css" rel="stylesheet" />
    <link href="css/suitfov-styles.css" rel="stylesheet" />
    <link href="css/building-styles.css" rel="stylesheet" />
    <link href="css/fonts-styles.css" rel="stylesheet" />
    <link href="css/dino-prices-styles.css" rel="stylesheet" />
</head>

<body>
    <div class="status-bar-safe-area"></div>

    <canvas id="network-canvas"></canvas>

    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>

    <script src="_framework/blazor.webview.js" autostart="false"></script>

    <script>
        window.startLocationPicker = function (dotNetRef) {
            // Just notify C# to start picking - it will handle everything
            dotNetRef.invokeMethodAsync('StartGlobalLocationPicker');
        };

        window.renderHeatmap = function (clickData) {
            const canvas = document.getElementById('heatmapCanvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Count clicks per position
            const clickMap = {};
            clickData.forEach(click => {
                const key = `${click.x},${click.y}`;
                clickMap[key] = (clickMap[key] || 0) + 1;
            });

            // Find max clicks
            const maxClicks = Math.max(...Object.values(clickMap));

            // Draw heatmap
            Object.entries(clickMap).forEach(([key, count]) => {
                const [x, y] = key.split(',').map(Number);
                const intensity = count / maxClicks;

                // Scale coordinates to canvas
                const canvasX = (x / screen.width) * canvas.width;
                const canvasY = (y / screen.height) * canvas.height;

                // Color from blue (cold) to red (hot)
                const r = Math.floor(255 * intensity);
                const g = Math.floor(255 * (1 - intensity) * 0.5);
                const b = Math.floor(255 * (1 - intensity));
                const alpha = 0.3 + (intensity * 0.7);

                ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${alpha})`;
                ctx.beginPath();
                ctx.arc(canvasX, canvasY, 20, 0, Math.PI * 2);
                ctx.fill();

                // Add glow effect for hot spots
                if (intensity > 0.7) {
                    ctx.fillStyle = `rgba(255, 255, 0, ${intensity * 0.3})`;
                    ctx.beginPath();
                    ctx.arc(canvasX, canvasY, 30, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
        };
    </script>

    <script src="js/network-animation.js"></script>
</body>
</html>